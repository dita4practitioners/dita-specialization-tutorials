<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <title>Topic Specialization Step 4-4 (continued): Implement Specialization-Specific XSLT
         Processing
      </title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="schema.DC" href="http://purl.org/dc/terms/">
      <meta name="DC.Type" content="subsection">
      
      <meta name="DC.Title" content="Topic Specialization Step 4-4 (continued): Implement Specialization-Specific XSLT Processing">
      
      <meta name="DC.Relation" scheme="URI" content="topic-specialization-step-4.html">
      
      <meta name="DC.Relation" scheme="URI" content="topic-specialization-step-4-5.html">
      
      <meta name="DC.Relation" scheme="URI" content="topic-specialization-step-4-6.html">
      
      <meta name="DC.Format" content="XHTML">
      
      <meta name="DC.Identifier" content="topic-spec-step-4-4cont">
      <script type="text/javascript">var d4p = {"relativePath":"..\/..\/..\/..\/","dev":false,"debug":false,"draft":false,"nextTopicHref":"body\/part-config-and-extend\/tutorials\/topic-specialization\/topic-specialization-step-4-6.html","previousTopicHref":"body\/part-config-and-extend\/tutorials\/topic-specialization\/topic-specialization-step-4-5.html"}</script>
      <link rel="stylesheet" type="text/css" media="screen, projection" href="../../../../themes/dita-d4p-classic/css/style.css">
      
      <link rel="stylesheet" type="text/css" media="screen, projection, print" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
      <script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  = mobile.css',
             // medium (size-1, size-2)
            '760px  to 980px  = 720.css',
            '980px  to 1270px = 960.css',
             // large (size-3, size-5)
            '1270px to 1600px = 1200.css',
            '1600px to 1940px = 1560.css',
             // extra large (size-6)
            '1940px to 2540px = 1920.css',
            '2540px           = 2520.css'
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script>
      <script type="text/javascript" src="../../../../themes/dita-d4p-classic/js/script.js"></script>
      </head>
   <body class="en-us dita-d4p-classic centered navigation-default">
      <div id="d4h5-main-container" class="container_12" role="application">
         <ul id="page-links" class="hidden">
            <li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li>
            <li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li>
            <li><a id="skip-to-footer" href="#footer">Skip to footer</a></li>
         </ul>
         <header role="banner" aria-labelledby="publication-title" class="hide-for-small">
            <div class="grid_8">
               <h1 id="publication-title">DITA Configuration and Specialization Tutorials</h1>
            </div>
            <section class="grid_4 search-box"></section>
            <secion class="clearfix"></secion>
         </header>
         <div id="d4h5-section-container" class="grid_12">
            <nav class="mobile-nav">
               <ul>
                  <li class="toggle-topbar menu-icon no-child "><a href="#local-navigation">Menu</a></li>
               </ul>
               <section class="nav-pub-title">DITA Configuration and Specialization Tutorials</section>
            </nav>
            <nav id="local-navigation" role="navigation" aria-label="Main navigation" class="grid_4 alpha omega">
               <div id="nav-content">
                  <ul>
                     <li class="toc_link no-child "><a href="../../../../index.html">Table of Contents</a></li>
                     <li class=" collapsible  active"><a href="../../../../standalone-tutorials/config-and-extend-tutorials-standalone.html">DITA Configuration and Specialization Tutorials</a><ul>
                           <li class=" no-child "><a href="../../../../standalone-tutorials/about-this-tutorial.html">About These Tutorials</a></li>
                           <li class=" collapsible  collapsed"><a href="../../../../body/part-end-to-end/dev-environment-setup.html">Setting Up Your Development Environment</a><ul>
                                 <li class=" no-child "><a href="../../../../body/part-tool-configuration-and-extension/oxygen/oxygen-setting-up-editing.html">Setting Up OxygenXML for DITA Editing</a></li>
                              </ul>
                           </li>
                           <li class=" collapsible  collapsed"><a href="../../../../body/part-config-and-extend/understanding_specialization.html">Understanding Configuration and Specialization</a><ul>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/vocabulary-management.html">XML Vocabularies and their Management</a></li>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/dita-vocabulary-management.html">DITA Vocabulary Management: Modules</a></li>
                                 <li class=" collapsible  collapsed"><a href="../../../../body/part-config-and-extend/doctypes-config-and-specialization.html">DITA Document Types, Configuration, and Specialization</a><ul>
                                       <li class=" no-child "><a href="../../../../body/part-config-and-extend/vocabulary-configuration.html">Configuration</a></li>
                                       <li class=" no-child "><a href="../../../../body/part-config-and-extend/specialization-overview.html">Specialization</a></li>
                                    </ul>
                                 </li>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/cost-of-interchange.html">The Cost of Interchange Enablement and the Overall Value of DITA</a></li>
                              </ul>
                           </li>
                           <li class=" collapsible  collapsed"><a href="../../../../body/part-config-and-extend/config-tutorials.html">Introduction to the Configuration and Extension Tutorials</a><ul>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/general-extension-development-methods.html">General Guidance for Developing New Shells and Modules</a></li>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/dtd-or-xsd.html">DTD or XSD?</a></li>
                                 <li class=" no-child "><a href="../../../../body/sidebars/saxon-and-schema-aware-parsing.html">Schema-Aware Parsing and Saxon</a></li>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/packaging-vocabulary-as-plugins.html">Packaging Document Type Shells and Vocabulary Modules as Toolkit Plugins</a></li>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/deploying-toolkit-plugins.html">Deploying Toolkit Plugins</a></li>
                                 <li class=" no-child "><a href="../../../../body/sidebars/public-identifiers.html">Public Identifiers</a></li>
                              </ul>
                           </li>
                           <li class=" collapsible  collapsed"><a href="../../../../body/part-config-and-extend/tutorials/document-type-shells/creating-document-type-shells.html">Document Type Shell Tutorial</a><ul>
                                 <li class=" collapsible  collapsed"><a href="../../../../body/part-config-and-extend/tutorials/document-type-shells/creating-a-dtd-shell.html">DTD Topic Type Shell Creation Tutorial</a><ul>
                                       <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/document-type-shells/dtd-topic-shell-step-01.html">DTD Topic Type Shell Tutorial Step 1: Copy Existing Shell</a></li>
                                       <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/document-type-shells/dtd-topic-shell-step-02.html">DTD Topic Type Shell Tutorial Step 2: Delete Unwanted Domain Modules</a></li>
                                       <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/document-type-shells/dtd-topic-shell-step-03.html">DTD Topic Type Shell Tutorial Step 3: Add Reference to a New Domain</a></li>
                                    </ul>
                                 </li>
                                 <li class=" collapsible  collapsed"><a href="../../../../body/part-config-and-extend/tutorials/document-type-shells/creating-an-xsd-shell.html">XSD Topic Type Shell Tutorial</a><ul>
                                       <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/document-type-shells/xsd-topic-shell-step-01.html">XSD Topic Type Shell Tutorial Step 1: Copy Existing Shell</a></li>
                                       <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/document-type-shells/xsd-topic-shell-step-02.html">XSD Topic Type Shell Tutorial Step 2: Remove References to Unwanted Domain Modules</a></li>
                                       <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/document-type-shells/xsd-topic-shell-step-03.html">XSD Topic Type Shell Tutorial Step 3: Add Reference to a New Domain</a></li>
                                    </ul>
                                 </li>
                              </ul>
                           </li>
                           <li class=" collapsible  collapsed"><a href="../../../../body/part-config-and-extend/tutorials/constraint-module/creating-constraint-module.html">Topic Constraint Module Tutorial</a><ul>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/constraint-module/constraint-domain-dtd-step-1.html">Topic Constraint Module Step 1: Create The Constraint Module File</a></li>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/constraint-module/constraint-domain-dtd-step-2.html">Topic Constraint Module Step 2: Declare The domains Attribute Text Entity</a></li>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/constraint-module/constraint-domain-dtd-step-3.html">Topic Constraint Module Step 3: Define the New Content Models</a></li>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/constraint-module/constraint-domain-dtd-step-4.html">Topic Constraint Module Step 4: Integrate the Constraint Module in a Document Type
                                       Shell</a></li>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/constraint-module/constraint-domain-dtd-step-5.html">Topic Constraint Module Step 5: Test the Document Type Shell</a></li>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/constraint-module/creating-an-xsd-constraint-module.html">Topic Constraint Module: XSD-Syntax Version</a></li>
                              </ul>
                           </li>
                           <li class=" collapsible  collapsed"><a href="../../../../body/part-config-and-extend/tutorials/attribute-domain/domain-att-spec-process.html">Attribute Specialization Tutorial</a><ul>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/attribute-domain/domain-att-spec-process-step-1.html">Attribute Specialization Step 1: Create Domain Module Files</a></li>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/attribute-domain/domain-att-spec-process-step-2.html">Attribute Specialization Step 2: Integrate With Document Type Shell</a></li>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/attribute-domain/domain-att-spec-process-step-3.html">Attribute Specialization Step 3: Test the Declarations</a></li>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/attribute-domain/xsd-attribute-specialization.html">Attribute Specialization: XSD Version</a></li>
                              </ul>
                           </li>
                           <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/element-domain/domain-spec-process-overview.html">Element Domain Specialization Process Overview (DTDs)</a></li>
                           <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/element-domain/domain-spec-process-step-1.html">Element Domain Specialization Step 1: Design The Domain Element Types</a></li>
                           <li class=" collapsible  collapsed"><a href="../../../../body/part-config-and-extend/tutorials/element-domain/domain-spec-process-step-2.html">Element Domain Specialization Step 2: Declare The Domain Element Types</a><ul>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/element-domain/domain-spec-process-step-2-1.html">Step 2-1. Create New .mod File</a></li>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/element-domain/domain-spec-process-step-2-2.html">Step 2-2. Declare Element Type Name Parameter Entities</a></li>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/element-domain/domain-spec-process-step-2-3.html">Step 2-3. Declare Elements and Attributes</a></li>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/element-domain/domain-spec-process-step-2-4.html">Step 2-4. Declare class Attributes</a></li>
                              </ul>
                           </li>
                           <li class=" collapsible  collapsed"><a href="../../../../body/part-config-and-extend/tutorials/element-domain/domain-spec-process-step-3.html">Element Domain Specialization Step 3: Declare The Module Entities File</a><ul>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/element-domain/domain-spec-process-step-3-1.html">Step 3-1. Create xmlDomain.ent</a></li>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/element-domain/domain-spec-process-step-3-2.html">Step 3-2. Declare Type-Specific Integration Entities</a></li>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/element-domain/domain-spec-process-step-3-3.html">Step 3-3. Declare Domain Usage Text Entity</a></li>
                              </ul>
                           </li>
                           <li class=" collapsible  collapsed"><a href="../../../../body/part-config-and-extend/tutorials/element-domain/domain-spec-process-step-4.html">Element Domain Specialization Step 4: Integrate The Module Into a Document Type Shell</a><ul>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/element-domain/domain-spec-process-step-4-1.html">Step 4-1. Setup Local Copy of Document Type Shell DTD</a></li>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/element-domain/domain-spec-process-step-4-2.html">Step 4-2. Create a Test Topic</a></li>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/element-domain/domain-spec-process-step-4-3.html">Step 4-3. Add .ent File to Shell</a></li>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/element-domain/domain-spec-process-step-4-4.html">Step 4-4. Update Type-Specific Parameter Entities in Shell DTD</a></li>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/element-domain/domain-spec-process-step-4-5.html">Step 4-5. Update domains attribute with new domain</a></li>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/element-domain/domain-spec-process-step-4-6.html">Step 4-6. Include .mod Declaration Set</a></li>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/element-domain/domain-spec-process-step-4-7.html">Step 4-7. Test the integration</a></li>
                              </ul>
                           </li>
                           <li class=" collapsible  collapsed"><a href="../../../../body/part-config-and-extend/tutorials/element-domain/domain-spec-process-step-5.html">Element Domain Specialization Step 5: Extend DITA Open Toolkit XHTML Processor</a><ul>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/element-domain/domain-spec-process-step-5-1.html">Element Domain Specialization Step 5-1: Create Blank Specialization-Specific XSLT
                                       Transform Plugin</a></li>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/element-domain/domain-spec-process-step-5-2.html">Element Domain Specialization Step 5-2: Implement Type-Specific XSLT Templates</a></li>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/element-domain/domain-spec-process-step-5-3.html">Element Domain Specialization Step 5-3: Test The Stylesheet</a></li>
                              </ul>
                           </li>
                           <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/element-domain/domain-spec-xsd.html">Element Domain Specialization: XSD Version</a></li>
                           <li class=" collapsible  active"><a href="../../../../body/part-config-and-extend/tutorials/topic-specialization/topic-specialization-tutorial.html">Topic Specialization Tutorial</a><ul>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/topic-specialization/topic-spec-process-overview.html">Topic Specialization Process Overview</a></li>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/topic-specialization/topic-specialization-step-1.html">Topic Specialization Step 1: Design The Topic Element Types</a></li>
                                 <li class=" collapsible  collapsed"><a href="../../../../body/part-config-and-extend/tutorials/topic-specialization/topic-specialization-step-2.html">Topic Specialization Step 2: Declare the Topic Module Element Types</a><ul>
                                       <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/topic-specialization/topic-specialization-step-2-1.html">Step 2-1. Create Test Case Document Instance</a></li>
                                       <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/topic-specialization/topic-specialization-step-2-2.html">Step 2-2. Create New Document Type Shell DTD</a></li>
                                       <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/topic-specialization/topic-specialization-step-2-3.html">Step 2-3. Create New .mod File and Integrate Into Shell</a></li>
                                       <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/topic-specialization/topic-specialization-step-2-4.html">Step 2-4. Declare FAQ Question Topic Type Elements and Attributes</a></li>
                                       <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/topic-specialization/topic-specialization-step-2-5.html">Step 2-5. Declare Element Type Parameter Entities</a></li>
                                       <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/topic-specialization/topic-specialization-step-2-6.html">Step 2-6. Declare FAQ Question class Attributes</a></li>
                                       <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/topic-specialization/topic-specialization-step-2-7.html">Step 2.7: Define domains Attribute Contribution Entity (.ent File)</a></li>
                                    </ul>
                                 </li>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/topic-specialization/topic-specialization-step-3.html">Topic Specialization Step 3. Package the Modules as a Toolkit Plugin</a></li>
                                 <li class=" collapsible  active"><a href="../../../../body/part-config-and-extend/tutorials/topic-specialization/topic-specialization-step-4.html">Topic Specialization Step 4: Extending the Toolkit To Support the Specialization</a><ul>
                                       <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/topic-specialization/topic-specialization-step-4-1.html">Topic Specialization Step 4-1: Create Initial Toolkit Plugin Components</a></li>
                                       <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/topic-specialization/topic-specialization-step-4-2.html">Topic Specialization Step 4-2: Create Templates For Specialized Elements</a></li>
                                       <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/topic-specialization/topic-specialization-step-4-3.html">Topic Specialization Step 4-3: Copy Template Contents from Base XSLTs</a></li>
                                       <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/topic-specialization/topic-specialization-step-4-4.html">Topic Specialization Step 4-4: Implement Specialization-Specific XSLT Processing</a></li>
                                       <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/topic-specialization/topic-specialization-step-4-5.html">Topic Specialization Step 4-5: Refine Markup Design for FAQ Question</a></li>
                                       <li class=" no-child  active"><a class="selected" href="../../../../body/part-config-and-extend/tutorials/topic-specialization/topic-specialization-step-4-4cont.html">Topic Specialization Step 4-4 (continued): Implement Specialization-Specific XSLT
                                             Processing</a></li>
                                       <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/topic-specialization/topic-specialization-step-4-6.html">Topic Specialization Step 4-6: Implement CSS Styles</a></li>
                                    </ul>
                                 </li>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/topic-specialization/topic-specialization-xsd.html">Topic Specialization: XSD Version</a></li>
                              </ul>
                           </li>
                           <li class=" collapsible  collapsed"><a href="../../../../body/part-config-and-extend/tutorials/map-specialization/map-specialization-tutorial.html">Map Specialization Tutorial</a><ul>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/map-specialization/map-specialization-step-1.html">Map Specialization Step 1: Design the Map Element Types</a></li>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/map-specialization/map-specialization-step-2.html">Map Specialization Step 2: Create New Document Type Shell DTD</a></li>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/map-specialization/map-specialization-step-3.html">Map Specialization Step 3: Create faq-map Map Type Module</a></li>
                                 <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/map-specialization/map-specialization-step-4.html">Map Specialization Step 4: Create faq-mapDomain Module</a></li>
                                 <li class=" collapsible  collapsed"><a href="../../../../body/part-config-and-extend/tutorials/map-specialization/map-specialization-xsd.html">Map Specialization: XSD Version</a><ul>
                                       <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/map-specialization/map-specialization-xsd-step-1.html">Map Specialization XSD Step 1: Define faq-map Map Type</a></li>
                                       <li class=" no-child "><a href="../../../../body/part-config-and-extend/tutorials/map-specialization/map-specialization-xsd-step-2.html">Map Specialization XSD Step 2: Define faq-mapDomain Map Domain</a></li>
                                    </ul>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </li>
                     <li class=" no-child "><a href="../../../../generated-index.html">Index</a></li>
                  </ul>
               </div>
            </nav>
            <div id="d4h5-main-content" class="grid_8 alpha omega">
               <section>
                  <div id="content-toolbar" class="toolbar hide-for-small">
                     
                     <div xmlns:htmlutil="http://dita4publishers.org/functions/htmlutil" class="familylinks">
                        
                        <div class="parentlink"><a href="topic-specialization-step-4.html" title="Topic Specialization Step 4: Extending the Toolkit To Support the Specialization"><span class="fi fi-arrow-up"></span><span class="screen-reader">Topic Specialization Step 4: Extending the Toolkit To Support the Specialization</span></a></div>
                        
                        <div class="previouslink"><a href="topic-specialization-step-4-5.html" title="Topic Specialization Step 4-5: Refine Markup Design for FAQ Question"><span class="fi fi-arrow-left"></span><span class="screen-reader">Topic Specialization Step 4-5: Refine Markup Design for FAQ Question</span></a></div>
                        
                        <div class="nextlink"><a href="topic-specialization-step-4-6.html" title="Topic Specialization Step 4-6: Implement CSS Styles"><span class="fi fi-arrow-right"></span><span class="screen-reader">Topic Specialization Step 4-6: Implement CSS Styles</span></a></div>
                        
                     </div>
                     
                  </div>
                  <div class="page subsection  - topic-topic subsection-subsection " id="topic-spec-step-4-4cont">
                     
                     <h1 class="title topictitle1">Topic Specialization Step 4-4 (continued): Implement Specialization-Specific XSLT
                        Processing
                     </h1>
                     <div class="body">
                        <p class="p">Having reworked the markup design to provide a short answer and answer details, pop
                           back up to step 4-4
                           and continue implementing the XSLT processing.
                        </p>
                        
                        <div class="p">The first thing to do is update the existing templates to reflect our new element
                           type names,
                           which means changing the template for <code>&lt;faq-answer&gt;</code> to match on
                           <span class="q">"faq-answer-details"</span> instead of <span class="q">"faq-answer"</span>:
                           <pre class="pre codeblock">
  &lt;xsl:template match="*[contains(@class, <strong class="ph b">' faq-question/faq-answer-details '</strong>)]"&gt;
</pre>
                           </div>
                        
                        <div class="p">Now the challenge is to modify the code within this template to give us the result
                           we want. Modify the template as follows: 
                           <ol class="ol" id="topic-spec-step-4-4cont__ol_8d223a01-6b4c-4d40-b14a-2330e6fd1529">
                              <li class="li">Delete all the comments between the call-template to <span class="q">"start-revtag"</span> and the
                                 apply-templates for <span class="q">"topic/abstract."</span></li>
                              
                              <li class="li">Because we have removed <code>&lt;abstract&gt;</code> from the content model for
                                 <code>&lt;faq-question&gt;</code>, you can delete the apply-templates
                                 instruction that matches on <span class="q">"topic/abstract."</span> Having the instruction there
                                 wouldn't hurt anything (there will never be an abstract to match on), but it
                                 might confuse somebody who knows the content model for
                                 <code>&lt;faq-question&gt;</code>. However, since somebody who knows the
                                 content model for topic might expect there to be a match on
                                 <code>&lt;abstract&gt;</code>, it's probably a good idea to provide a comment
                                 to the effect that <code>&lt;faq-question&gt;</code> doesn't allow
                                 <code>&lt;abstract&gt;</code>.
                              </li>
                              
                              <li class="li">Put a <code>&lt;div&gt;</code> with a <code>@class</code> attribute value of
                                 <span class="q">"faq-answer-details"</span> around the last <span class="q">"apply-templates"</span> call: <pre class="pre codeblock">
  <strong class="ph b">&lt;div class="faq-answer-details"&gt;</strong>
    &lt;xsl:apply-templates/&gt;
  <strong class="ph b">&lt;/div&gt;</strong></pre>
                                 <p class="p">This <code>&lt;div&gt;</code> clearly separates the answer details from the
                                    short answer and the <code>@class</code> value provides a hook that can
                                    be used in CSS styles or JavaScript to add additional formatting or behavior
                                    to the answer details.
                                 </p>
                                 
                              </li>
                              
                           </ol>
                           
                        </div>
                        
                        <div class="p">The reworked template should look like this (changed bits are shown in bold):<pre class="pre codeblock">  &lt;xsl:template match="*[contains(@class, ' faq-question/<strong class="ph b">faq-answer-details</strong> ')]"&gt;
    &lt;xsl:variable name="flagrules"&gt;
      &lt;xsl:call-template name="getrules"/&gt;
    &lt;/xsl:variable&gt;
    &lt;div&gt;
      &lt;xsl:call-template name="commonattributes"/&gt;
      &lt;xsl:call-template name="gen-style"&gt;
        &lt;xsl:with-param name="flagrules" select="$flagrules"&gt;&lt;/xsl:with-param&gt;
      &lt;/xsl:call-template&gt;
      &lt;xsl:call-template name="setidaname"/&gt;
      &lt;xsl:call-template name="start-flagit"&gt;
        &lt;xsl:with-param name="flagrules" select="$flagrules"&gt;&lt;/xsl:with-param&gt;     
      &lt;/xsl:call-template&gt;
      &lt;xsl:call-template name="start-revflag"&gt;
        &lt;xsl:with-param name="flagrules" select="$flagrules"/&gt;  
      &lt;/xsl:call-template&gt;
      <strong class="ph b">&lt;!-- Abstract not allowed in faq-question topic type --&gt; </strong>     
      &lt;!-- get the shortdesc para --&gt;
      &lt;xsl:apply-templates select="preceding-sibling::*[contains(@class,' topic/shortdesc ')]" mode="outofline"/&gt;
      
      &lt;!-- Insert pre-req links - after shortdesc - unless there is a prereq section about --&gt;
      &lt;xsl:apply-templates select="following-sibling::*[contains(@class,' topic/related-links ')]" mode="prereqs"/&gt;
      
      <strong class="ph b">&lt;div class="faq-answer-details"&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/div&gt;</strong>
      &lt;xsl:call-template name="end-revflag"&gt;
        &lt;xsl:with-param name="flagrules" select="$flagrules"/&gt;  
      &lt;/xsl:call-template&gt;
      &lt;xsl:call-template name="end-flagit"&gt;
        &lt;xsl:with-param name="flagrules" select="$flagrules"&gt;&lt;/xsl:with-param&gt; 
      &lt;/xsl:call-template&gt;
    &lt;/div&gt;&lt;xsl:value-of select="$newline"/&gt;
  &lt;/xsl:template&gt;
</pre>
                           </div>
                        
                        <p class="p">Without having tested it yet, the template now looks like it should be right: it's
                           not getting the
                           abstract, it is processing the short description (our new <code>&lt;faq-short-answer&gt;</code>) and the
                           rest of the processing should be appropriate.
                        </p>
                        
                        <p class="p">Redeploy the Toolkit plugin and run the transform against your sample FAQ question.
                           You should get the same output you got before since all we really did was change the
                           template match value and cut away stuff we didn't need.
                        </p>
                        
                        <p class="p">The next step in the implementation is to handle the <code>&lt;faq-short-answer&gt;</code> element. 
                        </p>
                        
                        <p class="p">The formatting specification says to output <span class="q">"A. "</span> followed by the answer text. To do
                           this we need a template that matches on <span class="q">" faq-question/faq-short-answer "</span>. Note
                           that even though <code>&lt;faq-short-answer&gt;</code> is specialized from
                           <code>&lt;shortdesc&gt;</code>, it would not make sense to simply override the
                           processing for <code>&lt;shortdesc&gt;</code>, as that would change the formatting for all
                           other topic types.
                        </p>
                        
                        <div class="p">Create the following template: <pre class="pre codeblock">
  &lt;xsl:template match="*[contains(@class, ' faq-question/faq-short-answer ')]" mode="outofline"&gt;
    &lt;div class="faq-short-answer"&gt;
      &lt;span class="faq-short-answer-a"&gt;A. &lt;/span&gt;
      &lt;xsl:apply-templates/&gt;
    &lt;/div&gt;
  &lt;/xsl:template&gt; 
</pre>
                           </div>
                        
                        <div class="p">Note the <code>@mode</code> attribute with the value <span class="q">"outofline."</span> This is necessary
                           because the short description is being processed out of its normal source order, that
                           is
                           from within the processing for the topic body (to which <code>&lt;shortdesc&gt;</code> is
                           a sibling) rather than from with the processing of <code>&lt;topic&gt;</code> (of which it
                           is a child). The base DITA stylesheets provide a generic way to handle this using
                           the
                           mode <span class="q">"outofline"</span> for all templates that handle elements processed out of their
                           normal document order. You can see that the mode is used on the apply templates in
                           the
                           template for <code>&lt;faq-question&gt;</code>:
                           <pre class="pre codeblock">
  &lt;xsl:template match="*[contains(@class, ' faq-question/faq-answer-details ')]" priority="10"&gt;
    &lt;div&gt;
       
      ...

      &lt;!-- get the shortdesc para --&gt;
      <strong class="ph b">&lt;xsl:apply-templates select="preceding-sibling::*[contains(@class,' topic/shortdesc ')]"
        mode="outofline"/&gt;</strong>

      ...

    &lt;/div&gt;
    &lt;xsl:value-of select="$newline"/&gt;
  &lt;/xsl:template&gt;
</pre>
                           </div>
                        
                        <p class="p">If you didn't specify the corresponding mode on the match template for
                           <code>&lt;faq-short-answer&gt;</code>, you would get the answer text twice, once from
                           base outofline mode template that matches on <span class="q">" topic/shortdesc "</span> and once for the
                           default mode template that matches on <span class="q">" faq-question/faq-short-answer "</span>.
                        </p>
                        
                        <p class="p">This template will put out <span class="q">"A. "</span> before the short description. The
                           <code>@class</code> values are there to support styling the result using CSS.
                        </p>
                        
                        <p class="p">Redeploy the Toolkit plugin, run the sample FAQ answer through the Toolkit, and inspect
                           the
                           results. You should now see the <span class="q">"A. "</span> before the short answer text (the first
                           paragraph of the result). This means that the XSLT is done. The next step is to create
                           or update the applicable CSS stylesheet to add the appropriate styling to the HTML
                           pages. 
                        </p>
                        
                     </div>
                     
                     <div xmlns:htmlutil="http://dita4publishers.org/functions/htmlutil" class="related-links"></div>
                  </div>
                  
               </section>
               <div class="clear"></div>
               
            </div>
            <div class="clearfix"></div>
         </div>
         <div class="clearfix"></div>
         <div id="footer-container" class="grid_12">
            
            
         </div>
      </div>
   </body>
</html>